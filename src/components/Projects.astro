---
import { work } from "@cv"
const months = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];
---
<div class="box column">
    <h4>Experience</h4>
    <ul>
        {


            work.map(
                ({ name, startDate, endDate, position, summary }, index) => {
                    const startYear = new Date(startDate)
                    const endYear = endDate != null ? new Date(endDate) : null;
                    if (index < 3){
                        return (
                            <li>
                                <p>
                                    <span>{position} @ {name}</span>
                                    <span>{months[startYear.getMonth()]+' '+startYear.getFullYear() } to {(endYear !== null) ? months[startYear.getMonth()]+' '+endYear.getFullYear() : 'Actual'}</span>
                                </p>
                                <p class="summary">{summary}</p>
                            </li>
                        )
                    }
                }
            )
        }
    </ul>
    <div>
        <a href="/cv" target="_blank"> VIEW MORE</a>
    </div>
</div>

<style>
    .column {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;;
        max-height: 350px;
        overflow-y: hidden;
        padding: 2rem 1rem;
        h4 {
            text-align: center;
            font-size: 2em;
            margin: 0 0 .5rem 0;
        }
        ul {
            list-style-type: none;
            padding: 0 1rem;
            margin: 0;
            li {
                margin-bottom: 2.5rem;
                p:nth-child(1) {
                    display: flex;
                    justify-content: space-between;
                    margin: 0;
                    span:nth-child(1) {
                        font-weight: bold;
                    }
                    span:nth-child(2) {
                        font-style: italic;
                    }
                }
            }
            .summary{
                text-align: justify;
                overflow: hidden;
                text-overflow: ellipsis;
                display: -webkit-box;
                -webkit-line-clamp: 3;
                -webkit-box-orient: vertical;
            }
        }
        div {
            background-image: linear-gradient(180deg, transparent, black, black);
            position: absolute;
            padding-bottom: 1rem;
            bottom: 0;
            display: flex;
            flex-direction: row;
            justify-content: center;
            width: 100%;
            a {
                display: flex;
                flex-direction: row;
                justify-content: center;
                text-decoration: none;
                padding: 1rem;
                background-color: palegoldenrod;
                font-weight: bold;
                font-size: 1.2rem;
                border-radius: 1rem;
                width: 30%;
                color: black;
            }
        }
    }
</style>